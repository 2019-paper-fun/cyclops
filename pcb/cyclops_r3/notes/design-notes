Jon Newman
2013-14
Notes while designing the Cyclops R3.0 board.

X1. Power for the DLD101 should come from an LM317 that recieved a 12V input and regulates that down to Vcc = 10 v

EDIT: 	> The LM317 has built in current protection and allows you to remove the current limit network from the design
		> Switched it to +15V in regulated to +12V supply rail.

X2. The onboard DAC needs to have pretty fast max sample and voltage slew rates to keep up with the LED. I want something with 1-3 usec rise times.

EDIT: 	> Alternatives with this speed were many times more expensive. Not worth it. 
		> If the user wants mega fast rising edges, they can pipe that in through the VINPUT pin.

X3. I'm not quite sure how to deal with reverse polarity at the V_REF input. Can I just put a buffer stage using one of the LM324's opamps that will null any negative inputs, or does this chip behave badly when its pins are taken below Vss?

EDIT: 	> Fixed using a two schottky diodes. 
		> One with anode to input, cathode to +12V: This means that when the input exceeds 12.3V, the diode will clamp the input signal. 
		> One with cathode to input, anode to GND: This means that when the input goes below -0.3V, the diode will clamp the input signal.

X4. The OP1177 package on the schematic should be an SOIC. Right now its MSOP.

EDIT: 	> Why?

5. I need to run/fix an ERC on the schematic before doing anything else to the layout.

6. Should the pre-biasing of the output MOSFET be moved to in between the opamp the the NPN/PNP totem pole? This would make getting a defined bias voltage easier.

EDIT:	> Yes.
		> Make sure their is resistive path from gate to ground though or the LED will never fully turn off.
		>

7. The LM324 is not a good choice for this applicaiton because it its outputs do not go rail-to-rail. This means that we have to wait for the base voltage drive to exceed 300 mV before the thing even starts driving the base. This causes the big ossiclation when starting from full off. Really, you need a RRIO amplifier so it knows what zero volts at the input is as well.

X8. At least with the LM324, I found that adding a small capacitor (200-500 pF) in parallel with the feedback resistor in the current measurment path, I could stablize the circuit which showed some ringing when the NPN was pre-biased. This indicates that a faster opamp might be good.

EDIT: > This seemed to filter the current measurement without actually effecting the true amount of current flowing through the sense resistor. This was verified by simply probing the voltage at the sense resistor in comparison with the current measurement provided by the op amp.

9. There should be a more rigorous over-current protection circuit. The whole thing should shut down if ~1.5A is drawn through the N-Channel MOSFET. The P-Channel input FET is a place to make this happen. An auxiliary voltage can be sent to its gate if the current threshold is exceeded. This will require some type of peak-detection comparitor circuit that is droopless, else the circuit will enter a crazy osscilation.

10. All silkscreening related to the board ID, designer, license etc should go on the back within a negative text block. This will free up room on the front of the board for power and overcurrent LED indicators along with a reset switch.

11. Look at the base drive of the push/pull NPN/PNP gate driver versus the gate drive signal. Compare to this http://www.allaboutcircuits.com/vol_6/chpt_6/10.html. Is there a dead zone in the base drive - i.e +/- 0.7 volts where the NPN/PNP are not biased enough to turn on. For that matter, does the PNP ever turn on? I suppose it would since the gate voltage, which is also the emitter voltage of the PNP, can be much higher than the base voltage. Anyway, if there is a dead zone, find a biasing scheme to get rid of it because it may be causing the dead zone and overshoot when going from full off to full on.


    
